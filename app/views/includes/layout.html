
{% extends "govuk/template.njk" %}

{% from "govuk/components/phase-banner/macro.njk" import govukPhaseBanner %}
{% from "govuk/components/header/macro.njk" import govukHeader %}
{% from "govuk/components/footer/macro.njk" import govukFooter %}

{% block pageTitle %}
    {% if title == undefined %}
        {% set title = content.title %}
    {% endif %}

    {{ title | safe }}{% if serviceName %}{{ " - " + serviceName }}{% endif %}
{% endblock %}

{% block head %}
    {% include "includes/head.html" %}
{% endblock %}

{% block header %}
    <div id="global-cookie-message">
        <p class="govuk-body">{{ cookieText | replace('{cookiesLink}', globals.links.cookies) | safe }}</p>
    </div>

    {% set navigationItems = [] %}
    {% if fields.userLoggedIn.value === "true" %}
        {% if fields.isDashboard.value !== "true" %}
            {% set navigationItems = (navigationItems.push({
                href: "/dashboard",
                text: common.myApplications
            }), navigationItems) %}
        {% endif %}

        {% set navigationItems = (navigationItems.push({
            href: "/sign-out",
            text: common.signOut
        }), navigationItems) %}
    {% else %}
        {% set navigationItems = (navigationItems.push({
            href: "/dashboard",
            text: common.signIn
        }), navigationItems) %}
    {% endif %}

    {{ govukHeader({
        homepageUrl: "#",
        containerClasses: "govuk-width-container",
        serviceName: serviceName,
        serviceUrl: "#",
        navigation: navigationItems
    }) }}
{% endblock %}

{% block beforeContent %}
    {{ govukPhaseBanner({
        tag: {
            text: common.phase
        },
        html: common.feedback | replace("{smartSurveyFeedbackUrl}", globals.links.survey) | replace("{currentPageUrl}", pageUrl) | safe
    }) }}
{% endblock %}

{% block footer %}
    {% include "includes/footer_links.html" %}
{% endblock %}

{% block bodyEnd %}
    {% include "includes/scripts.html" %}
{% endblock %}
