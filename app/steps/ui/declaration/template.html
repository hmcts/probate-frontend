{% extends "includes/two_thirds_form.html" %}

{% from "checkboxes/macro.njk" import govukCheckboxes %}
{% from "warning-text/macro.njk" import govukWarningText %}
{% from "button/macro.njk" import govukButton %}
{% from "widgets/lists.html" import unorderedList %}

{% block form_content %}
    <h1 class="govuk-heading-l">{{ content.title }}</h1>
    <p class="govuk-body word-break">{{ fields.legalStatement.value.intro | safe }}</p>
    <div class="declaration-wrapper word-break">
        <div class="inset-page declaration-grid-item">
            <div class="declaration-header">
                <div class="govuk-heading-m declaration-header-item">{{ content.highCourtHeader }}</div>
                <div class="govuk-heading-s declaration-header-item">{{ content.familyDivisionHeader }}</div>
                <div class="govuk-heading-s declaration-header-item">{{ content.probateHeader }}</div>
            </div>

            <h2 class="govuk-heading-m declaration-subheader">{{ content.legalStatementHeader }}</h2>
            <p class="govuk-body declaration-item">{{ fields.legalStatement.value.applicant | safe }}</p>

            <h3 class="govuk-heading-s declaration-subheader">{{ content.deceasedHeader }}</h3>
            <p class="govuk-body declaration-item">{{ fields.legalStatement.value.deceased | safe }} {{ fields.legalStatement.value.deceasedOtherNames }}</p>

            <h3 class="govuk-heading-s declaration-subheader">{{ content.deceasedEstateHeader }}</h3>
            <p class="govuk-body declaration-item">{{ fields.legalStatement.value.deceasedEstateValue | safe }}</p>
            <p class="govuk-body declaration-item">{{ fields.legalStatement.value.deceasedEstateLand | safe }}</p>

            <h3 class="govuk-heading-s declaration-subheader">{{ content.executorApplyingHeader }}</h3>
            {% for executor in fields.legalStatement.value.executorsApplying %}
                <p class="govuk-body declaration-item">{{ executor.name | safe }}</p>
                {% if executor.sign !== "" %}
                    <p class="govuk-body declaration-item">{{ executor.sign | safe }}</p>
                {% endif %}
            {% endfor %}

            {% if fields.legalStatement.value.executorsNotApplying.length > 0 %}
                <h3 class="govuk-heading-s declaration-subheader">{{ content.executorNotApplyingHeader }}</h3>
                {% for executor in fields.legalStatement.value.executorsNotApplying %}
                    <p class="govuk-body declaration-item">{{ executor | safe }}</p>
                {% endfor %}
            {% endif %}

            <h2 class="govuk-heading-l declaration-subheader">{{ content.declarationHeader }}</h2>
            <p class="govuk-body declaration-item">{{ fields.declaration.value.confirm | safe }}</p>

            {{ unorderedList([
                fields.declaration.value.confirmItem1,
                fields.declaration.value.confirmItem2,
                fields.declaration.value.confirmItem3
            ]) }}

            <p class="govuk-body declaration-item">{{ fields.declaration.value.requests | safe }}</p>

            {{ unorderedList([
                fields.declaration.value.requestsItem1,
                fields.declaration.value.requestsItem2
            ]) }}

            <p class="govuk-body declaration-item">{{ fields.declaration.value.understand | safe }}</p>

            {{ unorderedList([
                fields.declaration.value.understandItem1,
                fields.declaration.value.understandItem2
            ]) }}
        </div>
        <div class="declaration-grid-item">
            <h2 class="govuk-heading-m">{{ content.saveThisPage }}</h2>
            <p class="govuk-body">
                <em class="icon icon-file-download"></em>
                <a class="anchor-margin-left" id="declarationPdfHref" href="/declaration-pdf">{{ content.declarationPdf }}</a>
            </p>
        </div>
    </div>

    {{ govukCheckboxes({
        idPrefix: "declarationCheckbox",
        name: "declarationCheckbox",
        fieldset: {
            legend: {
                text: content.title,
                classes: "govuk-visually-hidden"
            }
        },
        items: [
            {
                value: true,
                text: fields.declaration.value.accept
            }
        ]
    }) }}

    {{ govukWarningText({
        text: fields.declaration.value.submitWarning | safe,
        iconFallbackText: "Warning"
    }) }}

    <div class="govuk-form-group">
        {{ govukButton({
            text: common.saveAndContinue,
            preventDoubleClick: true
        }) }}
    </div>
{% endblock %}
