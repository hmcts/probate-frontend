{% extends "includes/two_thirds_form.html" %}

{% from "widgets/lists.html" import unorderedList %}
{% from "widgets/checkboxes.html" import checkbox %}

{% block question %}
    <h1 class="form-title heading-large">{{ content.title }}</h1>
{% endblock %}

{% block form_content %}
    <p class="word-break">{{ fields.legalStatement.value.intro | safe }}</p>

    {% ifAsync fields.caseType.value === "gop" %}
        <div class="declaration-wrapper word-break">
            <div class="inset-page declaration-grid-item">
                <div class="heading-medium declaration-header">{{ content.highCourtHeader }}</div>
                <div class="heading-small declaration-header">{{ content.familyDivisionHeader }}</div>
                <div class="heading-small declaration-header">{{ content.probateHeader }}</div>

                <h2 class="heading-medium declaration-subheader">{{ content.legalStatementHeader }}</h2>
                <p class="declaration-item">{{ fields.legalStatement.value.applicant | safe }}</p>

                <h3 class="heading-small declaration-subheader">{{ content.deceasedHeader }}</h3>
                <p class="declaration-item">{{ fields.legalStatement.value.deceased | safe }} {{ fields.legalStatement.value.deceasedOtherNames }}</p>

                {% include "ui/declaration/includes/estate.njk" %}

                <h3 class="heading-small declaration-subheader">{{ content.executorApplyingHeader }}</h3>
                {% for executor in fields.legalStatement.value.executorsApplying %}
                    <p class="declaration-item">{{ executor.name | safe }}</p>
                    {% if executor.sign !== '' %}
                        <p class="declaration-item">{{ executor.sign | safe }}</p>
                    {% endif %}
                {% endfor %}

                {% if fields.legalStatement.value.executorsNotApplying.length > 0 %}
                    <h3 class="heading-small declaration-subheader">{{ content.executorNotApplyingHeader }}</h3>
                    {% for executor in fields.legalStatement.value.executorsNotApplying %}
                        <p class="declaration-item">{{ executor | safe }}</p>
                    {% endfor %}
                {% endif %}

                {% include "ui/declaration/includes/lists.njk" %}
            </div>
            {% include "ui/declaration/includes/download.njk" %}
        </div>
    {% endif %}
    {% ifAsync fields.caseType.value === "intestacy" %}
        <div class="declaration-wrapper word-break">
            <div class="inset-page declaration-grid-item">
                <div class="heading-medium declaration-header">{{ content.highCourtHeader }}</div>
                <div class="heading-small declaration-header">{{ content.familyDivisionHeader }}</div>
                <div class="heading-small declaration-header">{{ content.intestacyHeader }}</div>

                <h2 class="heading-medium declaration-subheader">{{ content.legalStatementHeader }}</h2>
                <p class="declaration-item">{{ fields.legalStatement.value.applicant | safe }}</p>

                <h3 class="heading-small declaration-subheader">{{ content.deceasedHeader }}</h3>
                <p class="declaration-item">{{ fields.legalStatement.value.deceased | safe }} {{ fields.legalStatement.value.deceasedOtherNames }}</p>
                <p class="declaration-item">{{ fields.legalStatement.value.deceasedMaritalStatus }}</p>
                <p class="declaration-item">{{ fields.legalStatement.value.deceasedChildren }}</p>

                {% include "ui/declaration/includes/estate.njk" %}

                <p class="declaration-item">{{ fields.legalStatement.value.applicant2 | safe }}</p>
                <p class="declaration-item">{{ fields.legalStatement.value.applying | safe }}</p>

                {% include "ui/declaration/includes/lists.njk" %}
            </div>
            {% include "ui/declaration/includes/download.njk" %}
        </div>
    {% endif %}

    {{ checkbox(
        name = 'declarationCheckbox',
        field = fields.declarationCheckbox,
        text = fields.declaration.value.accept,
        legend = content.title
    ) }}

    <div class="notice">
        <em class="icon icon-important"><span class="visually-hidden">Warning</span></em>
        <p>{{ fields.declaration.value.submitWarning | safe }}</p>
    </div>

    <div class="form-group">
        <input class="button" type="submit" id="acceptAndSend" value="{{ common.saveAndContinue }}">
    </div>
{% endblock %}
